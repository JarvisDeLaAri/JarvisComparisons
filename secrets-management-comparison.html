<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Secrets Management Comparison ‚Äî Single VPS AI Agent</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'Segoe UI', system-ui, sans-serif;
    background: #0a0e1a;
    color: #e0e0e0;
    padding: 40px 20px;
  }
  h1 { text-align: center; font-size: 26px; color: #fff; margin-bottom: 6px; }
  .subtitle { text-align: center; color: #888; margin-bottom: 40px; font-size: 13px; }

  /* Current setup banner */
  .current-banner {
    max-width: 1100px;
    margin: 0 auto 40px;
    padding: 20px 28px;
    background: linear-gradient(135deg, #1a2a1e, #162e1e);
    border: 2px solid #3a8a5a;
    border-radius: 16px;
    text-align: center;
  }
  .current-banner h3 { color: #6cd4a0; font-size: 16px; margin-bottom: 8px; }
  .current-banner p { color: #aaa; font-size: 13px; line-height: 1.7; }
  .current-banner .tag-green {
    display: inline-block;
    background: #1a3a2a;
    color: #6cd4a0;
    padding: 3px 10px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 600;
    margin: 2px;
  }

  /* Cards grid */
  .cards {
    display: flex;
    gap: 20px;
    max-width: 1200px;
    margin: 0 auto 48px;
    justify-content: center;
    flex-wrap: wrap;
  }
  .card {
    flex: 1;
    min-width: 300px;
    max-width: 380px;
    border-radius: 16px;
    padding: 24px;
    position: relative;
  }
  .card-current { background: linear-gradient(135deg, #1a2a1e, #162e1e); border: 2px solid #3a8a5a; }
  .card-systemd { background: linear-gradient(135deg, #1a1a2e, #16213e); border: 1px solid #2a3a5c; }
  .card-sops { background: linear-gradient(135deg, #2a1a2e, #2e1630); border: 1px solid #5c2a5c; }
  .card-vault { background: linear-gradient(135deg, #2a2a1a, #2e2616); border: 1px solid #5c5c2a; }
  .card-envonly { background: linear-gradient(135deg, #1a2a2a, #162e2e); border: 1px solid #2a5c5c; }

  .card-badge {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 10px;
    font-weight: 700;
    letter-spacing: 1px;
    text-transform: uppercase;
    margin-bottom: 14px;
  }
  .card-current .card-badge { background: #2a5c3a; color: #6cd4a0; }
  .card-systemd .card-badge { background: #2a3a5c; color: #6cb4ee; }
  .card-sops .card-badge { background: #5c2a5c; color: #d4a0ee; }
  .card-vault .card-badge { background: #5c5c2a; color: #eedd6c; }
  .card-envonly .card-badge { background: #2a5c5c; color: #6cdde0; }

  .card h2 { font-size: 18px; margin-bottom: 4px; }
  .card-current h2 { color: #6cd4a0; }
  .card-systemd h2 { color: #6cb4ee; }
  .card-sops h2 { color: #d4a0ee; }
  .card-vault h2 { color: #eedd6c; }
  .card-envonly h2 { color: #6cdde0; }

  .card-desc { font-size: 12px; color: #999; margin-bottom: 16px; line-height: 1.5; }

  .spec-list { list-style: none; }
  .spec-list li {
    padding: 8px 0;
    border-bottom: 1px solid rgba(255,255,255,0.06);
    font-size: 12px;
    display: flex;
    justify-content: space-between;
    gap: 10px;
  }
  .spec-list li:last-child { border-bottom: none; }
  .spec-label { color: #999; flex-shrink: 0; }
  .spec-value { color: #fff; text-align: right; font-weight: 600; }

  .tag { display: inline-block; padding: 2px 8px; border-radius: 10px; font-size: 10px; font-weight: 600; }
  .tag-green { background: #1a3a2a; color: #6cd4a0; }
  .tag-yellow { background: #3a3a1a; color: #eedd6c; }
  .tag-red { background: #3a1a1a; color: #ee6c6c; }
  .tag-blue { background: #1a2a3a; color: #6cb4ee; }

  /* Comparison table */
  .section-title { text-align: center; font-size: 20px; color: #fff; margin-bottom: 6px; }
  .section-sub { text-align: center; color: #666; font-size: 12px; margin-bottom: 24px; }

  .cmp-table {
    max-width: 1200px;
    margin: 0 auto 48px;
    border-collapse: collapse;
    width: 100%;
    border-radius: 12px;
    overflow: hidden;
  }
  .cmp-table th, .cmp-table td {
    padding: 12px 14px;
    text-align: left;
    font-size: 12px;
    border-bottom: 1px solid rgba(255,255,255,0.06);
  }
  .cmp-table th {
    background: #111827;
    color: #999;
    font-weight: 600;
    font-size: 10px;
    letter-spacing: 0.5px;
    text-transform: uppercase;
  }
  .cmp-table th:nth-child(2) { color: #6cd4a0; }
  .cmp-table th:nth-child(3) { color: #6cb4ee; }
  .cmp-table th:nth-child(4) { color: #d4a0ee; }
  .cmp-table th:nth-child(5) { color: #eedd6c; }
  .cmp-table th:nth-child(6) { color: #6cdde0; }
  .cmp-table td { background: #0f1524; }
  .cmp-table tr:hover td { background: #131a2e; }
  .cmp-table td:first-child { color: #ccc; font-weight: 500; }
  .cmp-table td:not(:first-child) { text-align: center; }

  /* Best-for cards */
  .best-cards {
    display: flex;
    gap: 16px;
    max-width: 1200px;
    margin: 0 auto 48px;
    justify-content: center;
    flex-wrap: wrap;
  }
  .best-card {
    flex: 1;
    min-width: 200px;
    max-width: 230px;
    border-radius: 14px;
    padding: 18px;
  }
  .best-current { background: linear-gradient(135deg, #12281a, #0f301a); border: 1px solid #1e4a2d; }
  .best-systemd { background: linear-gradient(135deg, #121828, #0f1a30); border: 1px solid #1e2d4a; }
  .best-sops { background: linear-gradient(135deg, #1e1228, #1e0f30); border: 1px solid #3a1e4a; }
  .best-vault { background: linear-gradient(135deg, #1e1e12, #1e1e0f); border: 1px solid #4a4a1e; }
  .best-envonly { background: linear-gradient(135deg, #121e28, #0f2830); border: 1px solid #1e4a4a; }

  .best-card h3 { font-size: 13px; margin-bottom: 10px; }
  .best-current h3 { color: #6cd4a0; }
  .best-systemd h3 { color: #6cb4ee; }
  .best-sops h3 { color: #d4a0ee; }
  .best-vault h3 { color: #eedd6c; }
  .best-envonly h3 { color: #6cdde0; }
  .best-card ul { list-style: none; }
  .best-card ul li { padding: 4px 0; font-size: 11px; color: #bbb; line-height: 1.5; }

  .verdict {
    max-width: 800px;
    margin: 0 auto;
    text-align: center;
    padding: 32px;
    background: linear-gradient(135deg, #141420, #1a1428);
    border: 1px solid #2a2440;
    border-radius: 16px;
  }
  .verdict h3 { color: #c9a0ff; font-size: 16px; margin-bottom: 10px; }
  .verdict p { color: #999; font-size: 13px; line-height: 1.7; }
  .verdict strong { color: #ddd; }

  .note {
    max-width: 1100px;
    margin: 24px auto 0;
    text-align: center;
    font-size: 11px;
    color: #444;
  }
</style>
</head>
<body>

<h1>üîê Secrets Management Comparison</h1>
<p class="subtitle">Five approaches for a single VPS running an AI agent ‚Äî from simple to enterprise</p>

<!-- ‚îÄ‚îÄ‚îÄ Current Setup Banner ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->

<div class="current-banner">
  <h3>‚úÖ What We Already Have (~80% of the security benefit)</h3>
  <p>
    Our current setup already covers the most important basics:
    <br><br>
    <span class="tag-green">chmod 600 on all secret files</span>
    <span class="tag-green">User isolation between services</span>
    <span class="tag-green">ACLs restricting path traversal</span>
    <span class="tag-green">Separate users can't read each other's secrets</span>
    <br><br>
    This stops the most common attack: a compromised service reading another service's secrets.
    <br>
    Everything below is about the remaining ~20% ‚Äî encrypted-at-rest, backup safety, and root compromise scenarios.
  </p>
</div>

<!-- ‚îÄ‚îÄ‚îÄ Overview Cards ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->

<p class="section-title">üìä Overview</p>
<p class="section-sub">Quick specs for each approach</p>

<div class="cards">

  <div class="card card-current">
    <span class="card-badge">Current Setup</span>
    <h2>.env + File Permissions</h2>
    <p class="card-desc">Plain text .env files with strict Unix permissions, user isolation, and ACLs.</p>
    <ul class="spec-list">
      <li><span class="spec-label">Install time</span><span class="spec-value"><span class="tag tag-green">0 min</span></span></li>
      <li><span class="spec-label">Dependencies</span><span class="spec-value">None</span></li>
      <li><span class="spec-label">RAM usage</span><span class="spec-value">0 MB</span></li>
      <li><span class="spec-label">Disk usage</span><span class="spec-value">~0 MB</span></li>
      <li><span class="spec-label">Maintenance</span><span class="spec-value"><span class="tag tag-green">None</span></span></li>
      <li><span class="spec-label">Learning curve</span><span class="spec-value"><span class="tag tag-green">Zero</span></span></li>
      <li><span class="spec-label">Encryption at rest</span><span class="spec-value"><span class="tag tag-red">No</span></span></li>
    </ul>
  </div>

  <div class="card card-systemd">
    <span class="card-badge">Built-in</span>
    <h2>systemd Credentials</h2>
    <p class="card-desc">EncryptedCredential= in unit files. Secrets encrypted with TPM2 or host key.</p>
    <ul class="spec-list">
      <li><span class="spec-label">Install time</span><span class="spec-value"><span class="tag tag-green">10 min</span></span></li>
      <li><span class="spec-label">Dependencies</span><span class="spec-value">systemd 250+</span></li>
      <li><span class="spec-label">RAM usage</span><span class="spec-value">0 MB</span></li>
      <li><span class="spec-label">Disk usage</span><span class="spec-value">~0 MB</span></li>
      <li><span class="spec-label">Maintenance</span><span class="spec-value"><span class="tag tag-green">Low</span></span></li>
      <li><span class="spec-label">Learning curve</span><span class="spec-value"><span class="tag tag-yellow">Medium</span></span></li>
      <li><span class="spec-label">Encryption at rest</span><span class="spec-value"><span class="tag tag-green">Yes</span></span></li>
    </ul>
  </div>

  <div class="card card-sops">
    <span class="card-badge">Encryption Layer</span>
    <h2>SOPS + age</h2>
    <p class="card-desc">Encrypted secret files in git. Decrypted at deploy time with an age key.</p>
    <ul class="spec-list">
      <li><span class="spec-label">Install time</span><span class="spec-value"><span class="tag tag-green">15 min</span></span></li>
      <li><span class="spec-label">Dependencies</span><span class="spec-value">sops, age</span></li>
      <li><span class="spec-label">RAM usage</span><span class="spec-value">0 MB (cli only)</span></li>
      <li><span class="spec-label">Disk usage</span><span class="spec-value">~20 MB</span></li>
      <li><span class="spec-label">Maintenance</span><span class="spec-value"><span class="tag tag-yellow">Medium</span></span></li>
      <li><span class="spec-label">Learning curve</span><span class="spec-value"><span class="tag tag-yellow">Medium</span></span></li>
      <li><span class="spec-label">Encryption at rest</span><span class="spec-value"><span class="tag tag-green">Yes</span></span></li>
    </ul>
  </div>

  <div class="card card-vault">
    <span class="card-badge">Enterprise</span>
    <h2>HashiCorp Vault</h2>
    <p class="card-desc">Full secrets manager with API, audit log, dynamic secrets, lease management.</p>
    <ul class="spec-list">
      <li><span class="spec-label">Install time</span><span class="spec-value"><span class="tag tag-red">1‚Äì2 hours</span></span></li>
      <li><span class="spec-label">Dependencies</span><span class="spec-value">Vault binary, storage backend</span></li>
      <li><span class="spec-label">RAM usage</span><span class="spec-value">100‚Äì300 MB</span></li>
      <li><span class="spec-label">Disk usage</span><span class="spec-value">~200 MB</span></li>
      <li><span class="spec-label">Maintenance</span><span class="spec-value"><span class="tag tag-red">High</span></span></li>
      <li><span class="spec-label">Learning curve</span><span class="spec-value"><span class="tag tag-red">Steep</span></span></li>
      <li><span class="spec-label">Encryption at rest</span><span class="spec-value"><span class="tag tag-green">Yes</span></span></li>
    </ul>
  </div>

  <div class="card card-envonly">
    <span class="card-badge">Minimal</span>
    <h2>Environment-Only</h2>
    <p class="card-desc">systemd EnvironmentFile= with strict permissions. No .env in app dirs.</p>
    <ul class="spec-list">
      <li><span class="spec-label">Install time</span><span class="spec-value"><span class="tag tag-green">5 min</span></span></li>
      <li><span class="spec-label">Dependencies</span><span class="spec-value">systemd</span></li>
      <li><span class="spec-label">RAM usage</span><span class="spec-value">0 MB</span></li>
      <li><span class="spec-label">Disk usage</span><span class="spec-value">~0 MB</span></li>
      <li><span class="spec-label">Maintenance</span><span class="spec-value"><span class="tag tag-green">Low</span></span></li>
      <li><span class="spec-label">Learning curve</span><span class="spec-value"><span class="tag tag-green">Low</span></span></li>
      <li><span class="spec-label">Encryption at rest</span><span class="spec-value"><span class="tag tag-red">No</span></span></li>
    </ul>
  </div>

</div>

<!-- ‚îÄ‚îÄ‚îÄ Security Comparison ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->

<p class="section-title">üõ°Ô∏è Security Level</p>
<p class="section-sub">What each approach protects against</p>

<table class="cmp-table">
  <tr>
    <th>Threat</th>
    <th>.env + Perms</th>
    <th>systemd Creds</th>
    <th>SOPS + age</th>
    <th>Vault</th>
    <th>Env-Only</th>
  </tr>
  <tr>
    <td>Compromised non-root user</td>
    <td>‚úÖ</td>
    <td>‚úÖ</td>
    <td>‚úÖ</td>
    <td>‚úÖ</td>
    <td>‚úÖ</td>
  </tr>
  <tr>
    <td>Path traversal / file read</td>
    <td>‚úÖ ACLs</td>
    <td>‚úÖ</td>
    <td>‚úÖ</td>
    <td>‚úÖ</td>
    <td>‚úÖ</td>
  </tr>
  <tr>
    <td>Disk theft / offline access</td>
    <td>‚ùå Plaintext</td>
    <td>‚úÖ Encrypted</td>
    <td>‚úÖ Encrypted</td>
    <td>‚úÖ Encrypted</td>
    <td>‚ùå Plaintext</td>
  </tr>
  <tr>
    <td>Backup / snapshot leak</td>
    <td>‚ùå Plaintext</td>
    <td>‚úÖ Encrypted</td>
    <td>‚úÖ Encrypted</td>
    <td>‚úÖ Encrypted</td>
    <td>‚ùå Plaintext</td>
  </tr>
  <tr>
    <td>Secrets in git history</td>
    <td>‚ùå If committed</td>
    <td>üü° N/A</td>
    <td>‚úÖ Safe to commit</td>
    <td>‚úÖ Not in files</td>
    <td>‚ùå If committed</td>
  </tr>
  <tr>
    <td>Root compromise</td>
    <td>‚ùå Game over</td>
    <td>‚ùå Game over</td>
    <td>‚ùå Game over</td>
    <td>üü° Audit trail</td>
    <td>‚ùå Game over</td>
  </tr>
  <tr>
    <td>Secret rotation</td>
    <td>üü° Manual</td>
    <td>üü° Manual</td>
    <td>üü° Manual</td>
    <td>‚úÖ Automatic</td>
    <td>üü° Manual</td>
  </tr>
  <tr>
    <td>Audit log of access</td>
    <td>‚ùå No</td>
    <td>üü° journald</td>
    <td>‚ùå No</td>
    <td>‚úÖ Full audit</td>
    <td>‚ùå No</td>
  </tr>
</table>

<!-- ‚îÄ‚îÄ‚îÄ Setup Complexity ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->

<p class="section-title">üõ†Ô∏è Setup Complexity</p>
<p class="section-sub">What it takes to get running and keep running</p>

<table class="cmp-table">
  <tr>
    <th>Aspect</th>
    <th>.env + Perms</th>
    <th>systemd Creds</th>
    <th>SOPS + age</th>
    <th>Vault</th>
    <th>Env-Only</th>
  </tr>
  <tr>
    <td>Install</td>
    <td>Nothing to install</td>
    <td>Already have systemd</td>
    <td>2 binaries</td>
    <td>Binary + config + storage</td>
    <td>Already have systemd</td>
  </tr>
  <tr>
    <td>Initial config</td>
    <td>chmod + chown</td>
    <td>systemd-creds encrypt</td>
    <td>Generate age key, create .sops.yaml</td>
    <td>Init, unseal, policies, secrets</td>
    <td>Move secrets to EnvironmentFile</td>
  </tr>
  <tr>
    <td>Adding a new secret</td>
    <td>Edit .env file</td>
    <td>Encrypt + add to unit</td>
    <td>sops edit file</td>
    <td>vault kv put + policy update</td>
    <td>Edit env file, restart unit</td>
  </tr>
  <tr>
    <td>Ongoing maintenance</td>
    <td>None</td>
    <td>Minimal</td>
    <td>Key management</td>
    <td>Unsealing, upgrades, storage</td>
    <td>None</td>
  </tr>
  <tr>
    <td>Failure mode</td>
    <td>File deleted = secret lost</td>
    <td>Host key lost = all lost</td>
    <td>Age key lost = all lost</td>
    <td>Unseal keys lost = all lost</td>
    <td>File deleted = secret lost</td>
  </tr>
</table>

<!-- ‚îÄ‚îÄ‚îÄ Best For ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->

<p class="section-title">üéØ Best For</p>
<p class="section-sub">When to pick each approach</p>

<div class="best-cards">

  <div class="best-card best-current">
    <h3>üü¢ .env + Perms</h3>
    <ul>
      <li>‚ñ∏ Single VPS, single admin</li>
      <li>‚ñ∏ User isolation already in place</li>
      <li>‚ñ∏ No compliance requirements</li>
      <li>‚ñ∏ Simplicity is the priority</li>
      <li>‚ñ∏ You trust your backup pipeline</li>
    </ul>
  </div>

  <div class="best-card best-systemd">
    <h3>üî∑ systemd Creds</h3>
    <ul>
      <li>‚ñ∏ Want encryption with zero new deps</li>
      <li>‚ñ∏ All services are systemd units</li>
      <li>‚ñ∏ Backups might leak to untrusted storage</li>
      <li>‚ñ∏ VPS provider you don't fully trust</li>
    </ul>
  </div>

  <div class="best-card best-sops">
    <h3>üü£ SOPS + age</h3>
    <ul>
      <li>‚ñ∏ Secrets need to live in git</li>
      <li>‚ñ∏ Multi-machine deploys from one repo</li>
      <li>‚ñ∏ Team needs to share encrypted secrets</li>
      <li>‚ñ∏ GitOps / infrastructure-as-code workflows</li>
    </ul>
  </div>

  <div class="best-card best-vault">
    <h3>üü° Vault</h3>
    <ul>
      <li>‚ñ∏ Dynamic secrets (DB creds, cloud tokens)</li>
      <li>‚ñ∏ Compliance requires audit trail</li>
      <li>‚ñ∏ Multiple services, multiple teams</li>
      <li>‚ñ∏ Budget for ops overhead</li>
    </ul>
  </div>

  <div class="best-card best-envonly">
    <h3>üîµ Env-Only</h3>
    <ul>
      <li>‚ñ∏ Want fewer files on disk</li>
      <li>‚ñ∏ Small step up from .env files</li>
      <li>‚ñ∏ systemd-managed services only</li>
      <li>‚ñ∏ Reduce attack surface slightly</li>
    </ul>
  </div>

</div>

<!-- ‚îÄ‚îÄ‚îÄ Verdict ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ -->

<div class="verdict">
  <h3>üí° Bottom Line</h3>
  <p>
    With <strong>600 permissions, user isolation, and ACLs</strong>, you already have ~80% of the security benefit.
    The remaining 20% is about <strong>encryption at rest</strong> ‚Äî protecting against disk theft, backup leaks,
    and snapshot exposure. For a single VPS with one admin, the practical risk is low.
    <br><br>
    <strong>If you want the next step:</strong> systemd credentials give you encryption at rest with zero new dependencies ‚Äî
    it's already on your system. SOPS + age is the move if you ever want secrets in git.
    Vault is overkill for a single VPS ‚Äî it's designed for organizations, not solo operators.
    <br><br>
    <strong>Recommendation:</strong> Stay with the current setup. Consider systemd credentials only if your
    backup pipeline touches untrusted storage. Everything else is over-engineering for a single-VPS, single-admin scenario.
  </p>
</div>

<p class="note">Comparison assumes a single Linux VPS with one administrative user. Threat model changes significantly with multiple admins, compliance requirements, or multi-host deployments.</p>

</body>
</html>
